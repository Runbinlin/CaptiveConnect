# 🛠️ FatThin 开发日志

## 项目概述

FatThin 是一个展示不同游戏机制的双人对战游戏，通过胖瘦两个角色的对比，探索游戏平衡性设计。

## 🏗️ 架构设计

### ECS 组件系统

```rust
// 核心组件
Player          // 玩家数据（类型、血量、速度、XP）
Bullet          // 子弹（伤害、生命周期）
XpOrb           // 经验球（经验值）
Velocity        // 速度组件（用于子弹移动）
```

### 游戏状态管理

```rust
enum GameState {
    Menu,           // 主菜单
    Playing,        // 游戏中
    Paused,         // 暂停
}
```

## 🎮 游戏机制设计

### 角色平衡性

| 属性 | 胖子 | 瘦子 | 设计理念 |
|------|------|------|----------|
| 血量 | 200 | 100 | 胖子更耐打 |
| 速度 | 150 | 300 | 瘦子更灵活 |
| 攻击方式 | 近战范围 | 远程单体 | 不同战术风格 |
| 攻击伤害 | 25 | 15 | 胖子高伤害补偿 |

### 技能系统

- **XP 获取**：收集地图上的 XP 球
- **技能触发**：达到 100 XP 自动激活
- **胖子技能**：移动速度 ×2（弥补速度劣势）
- **瘦子技能**：射程 ×1.5（增强远程优势）

## 🔧 技术实现

### 输入系统

```rust
// 胖子控制映射
WASD -> 移动
Space -> 攻击

// 瘦子控制映射  
Arrow Keys -> 移动
Enter -> 攻击
```

### 碰撞检测

- **XP 收集**：距离检测（30 像素范围）
- **攻击判定**：
  - 胖子：范围攻击（80×80 像素区域）
  - 瘦子：子弹碰撞检测

### 性能优化

- 子弹生命周期管理（自动销毁）
- UI 更新频率控制（减少控制台输出）
- 并行系统执行（Bevy ECS 优势）

## 📊 开发进度

### ✅ 已完成功能

- [x] 基础角色移动系统
- [x] 双角色攻击机制
- [x] XP 收集系统
- [x] 技能激活逻辑
- [x] 基础 UI 显示
- [x] 项目结构搭建

### 🚧 开发中功能

- [ ] 图形化 UI 界面
- [ ] 鼠标瞄准系统
- [ ] 音效集成

### 📋 待开发功能

#### 短期计划（1-2 周）
- [ ] 敌人 AI 系统
- [ ] 血条显示
- [ ] 地图边界
- [ ] 更多 XP 球生成

#### 中期计划（1-2 月）
- [ ] 武器系统扩展
- [ ] 关卡设计
- [ ] 存档功能
- [ ] 设置菜单

#### 长期计划（3-6 月）
- [ ] 联网对战
- [ ] 关卡编辑器
- [ ] 成就系统
- [ ] 排行榜

## 🐛 已知问题

1. **子弹方向固定**：瘦子子弹只能向上射击
   - 解决方案：添加鼠标瞄准系统

2. **UI 信息过多**：控制台输出频繁
   - 解决方案：实现图形化 HUD

3. **缺少边界检测**：角色可以移出屏幕
   - 解决方案：添加地图边界系统

## 🎯 设计哲学

### 游戏平衡
- **互补机制**：胖瘦角色各有优劣
- **技能补强**：技能系统弥补角色短板
- **策略深度**：不同角色需要不同战术

### 代码质量
- **模块化设计**：清晰的系统分离
- **可扩展性**：便于添加新功能
- **性能优先**：充分利用 Bevy ECS 优势

## 📚 学习资源

- [Bevy 官方文档](https://bevy-cheatbook.github.io/)
- [Rust 游戏开发指南](https://arewegameyet.rs/)
- [ECS 架构模式](https://github.com/SanderMertens/ecs-faq)

## 🤔 技术决策记录

### 为什么选择 Bevy？
- **现代化**：基于 Rust，内存安全
- **ECS 架构**：天然支持组件化设计
- **活跃社区**：快速发展的生态系统
- **跨平台**：一次编写，多平台运行

### 为什么使用控制台 UI？
- **快速原型**：专注核心玩法开发
- **调试友好**：便于观察游戏状态
- **后续升级**：可逐步替换为图形界面

---

**持续更新中...** 📝